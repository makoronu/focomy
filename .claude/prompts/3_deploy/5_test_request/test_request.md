# テスト依頼書作成

**QAテスター向け厳格なテスト依頼書を生成**

---

## やること

1. 今回の変更内容を確認
2. 以下のテンプレートに従ってテスト依頼書を生成
3. ユーザーに提示

---

## テンプレート

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Focomy v{VERSION} QAテスト依頼書
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【テスト対象】
機能: {機能名}
URL: https://4690.tuishou.info/admin/{対象パス}

【認証情報】
URL: https://4690.tuishou.info/admin/
Email: admin@shirokuma.com
Password: Shirokuma2024!

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 1. 機能テスト

### 1.1 {機能カテゴリ1}
| # | テスト項目 | 期待結果 | 結果 |
|---|-----------|----------|------|
| 1.1.1 | {テスト内容} | {期待結果} | □ |
| 1.1.2 | {テスト内容} | {期待結果} | □ |

### 1.2 {機能カテゴリ2}
| # | テスト項目 | 期待結果 | 結果 |
|---|-----------|----------|------|
| 1.2.1 | {テスト内容} | {期待結果} | □ |

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 2. セキュリティテスト

### 2.1 認証・認可
| # | テスト項目 | 期待結果 | 結果 |
|---|-----------|----------|------|
| 2.1.1 | 未ログイン状態でページアクセス | ログイン画面リダイレクト | □ |
| 2.1.2 | 未ログイン状態でAPI呼び出し | 401 Unauthorized | □ |
| 2.1.3 | セッション切れ後のAPI呼び出し | 401 Unauthorized | □ |

### 2.2 XSS（クロスサイトスクリプティング）
| # | テスト項目 | 入力値 | 期待結果 | 結果 |
|---|-----------|--------|----------|------|
| 2.2.1 | テキスト入力欄 | `<script>alert(1)</script>` | エスケープ/無効 | □ |
| 2.2.2 | テキスト入力欄 | `"><img src=x onerror=alert(1)>` | エスケープ/無効 | □ |
| 2.2.3 | API経由で不正値送信 | `{"field": "<script>"}` | サニタイズ/拒否 | □ |

### 2.3 インジェクション
| # | テスト項目 | 入力値 | 期待結果 | 結果 |
|---|-----------|--------|----------|------|
| 2.3.1 | パストラバーサル | `../../../etc/passwd` | 404/拒否 | □ |
| 2.3.2 | SQLインジェクション | `'; DROP TABLE--` | エラー/無効 | □ |
| 2.3.3 | 特殊文字 | `%00`, `%0d%0a` | エラー/無視 | □ |

### 2.4 CSRF
| # | テスト項目 | 期待結果 | 結果 |
|---|-----------|----------|------|
| 2.4.1 | CSRFトークンなしでPOST | 403 Forbidden | □ |
| 2.4.2 | 不正なCSRFトークンでPOST | 403 Forbidden | □ |

### 2.5 レート制限・DoS対策
| # | テスト項目 | 期待結果 | 結果 |
|---|-----------|----------|------|
| 2.5.1 | 連続100回API呼び出し | 429または正常動作 | □ |
| 2.5.2 | 大量データ送信（1MB） | 413または拒否 | □ |

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 3. エッジケース・異常系

### 3.1 入力値バリデーション
| # | テスト項目 | 入力値 | 期待結果 | 結果 |
|---|-----------|--------|----------|------|
| 3.1.1 | 空文字 | `` | デフォルト値/エラー | □ |
| 3.1.2 | 超長文字列 | 10000文字 | 切り捨て/エラー | □ |
| 3.1.3 | NULL/undefined | `null` | エラー/無視 | □ |
| 3.1.4 | 型不一致 | 数値に文字列 | エラー/無視 | □ |

### 3.2 ネットワーク異常
| # | テスト項目 | 期待結果 | 結果 |
|---|-----------|----------|------|
| 3.2.1 | オフライン時に保存 | エラーメッセージ表示 | □ |
| 3.2.2 | タイムアウト発生時 | ユーザーに通知 | □ |

### 3.3 並行操作
| # | テスト項目 | 期待結果 | 結果 |
|---|-----------|----------|------|
| 3.3.1 | 2タブで同時編集→保存 | 後勝ちまたは警告 | □ |
| 3.3.2 | 連打で複数回保存 | 重複保存されない | □ |

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 4. クロスブラウザテスト

| # | 環境 | 結果 |
|---|------|------|
| 4.1 | Chrome (最新) | □ |
| 4.2 | Firefox (最新) | □ |
| 4.3 | Safari (最新) | □ |
| 4.4 | Edge (最新) | □ |
| 4.5 | iOS Safari | □ |
| 4.6 | Android Chrome | □ |

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 5. レスポンシブテスト

| # | 画面幅 | 確認項目 | 結果 |
|---|--------|----------|------|
| 5.1 | 1920px | レイアウト正常 | □ |
| 5.2 | 1024px | レイアウト崩れなし | □ |
| 5.3 | 768px | タブレット表示正常 | □ |
| 5.4 | 375px | モバイル表示正常 | □ |

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 6. API直接テスト（curl）

{該当APIがある場合のみ記載}

### 6.1 {API名}
```bash
curl -X {METHOD} "{URL}" \
  -H "Cookie: session=<YOUR_SESSION>" \
  -H "X-CSRF-Token: <YOUR_TOKEN>" \
  -d '{DATA}'
```
期待: {期待結果}

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 報告フォーマット

【発見日時】YYYY-MM-DD HH:MM
【テスト項目番号】X.X.X
【再現手順】
1.
2.
3.

【期待結果】
【実際の結果】
【スクリーンショット】（必須）
【ブラウザ/OS】
【重要度】Critical / High / Medium / Low

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## カスタマイズ指針

### 機能テスト（セクション1）
- 今回の変更内容に特化したテスト項目を追加
- 正常系・異常系の両方をカバー
- UI操作の具体的な手順を記載

### セキュリティテスト（セクション2）
- 変更箇所に関連するセキュリティ項目を重点的に
- 入力がある場合はXSS/インジェクション必須
- API追加時は認証・CSRF必須

### エッジケース（セクション3）
- 今回の機能に特有のエッジケースを追加
- 「ありえない」入力も含める

### API直接テスト（セクション6）
- 新規APIがある場合のみ記載
- 認証なし・認証ありの両パターン

---

## 完了条件

- [ ] 今回の変更に特化した機能テスト項目を追加
- [ ] セキュリティテストのテンプレートを適用
- [ ] 必要に応じてAPI直接テストを追加
- [ ] テスト依頼書をユーザーに提示

---

## 次の工程

→ 4_retrospective/_main.md
